{"version":3,"sources":["../dist-esnext/createUser.js"],"names":["V","userNameValidation","validateString","required","minLength","maxLength","toLowerCase","getPasswordValidation","createUser","validate","displayName","userName","password","email","validateEmail","otherUsersWithSameUserNameOrEmail","user","otherUsers","addError","filter","otherUser","length","ERROR_USER_USERNAME_IN_USE","ERROR_USER_EMAIL_IN_USE"],"mappings":";;;;;;;AAAA;;IAAYA,C;;AACZ;;;;;;;;AACO,IAAMC,kDAAqBD,EAAEE,cAAF,CAAiB;AAC/CC,cAAU,IADqC;AAE/CC,eAAW,CAFoC;AAG/CC,eAAW,EAHoC;AAI/CC,iBAAa;AAJkC,CAAjB,CAA3B;AAMA,IAAMC,wDAAwB,SAAxBA,qBAAwB,CAACJ,QAAD;AAAA,WAAcH,EAAEE,cAAF,CAAiB;AAChEC,0BADgE;AAEhEC,mBAAW,CAFqD;AAGhEC,mBAAW;AAHqD,KAAjB,CAAd;AAAA,CAA9B;AAKP;;;AAGO,IAAMG,kCAAaR,EAAES,QAAF,CAAW;AACjCC,iBAAaV,EAAEE,cAAF,CAAiB;AAC1BC,kBAAU,IADgB;AAE1BC,mBAAW,CAFe;AAG1BC,mBAAW;AAHe,KAAjB,CADoB;AAMjCM,cAAUV,kBANuB;AAOjCW,cAAUL,sBAAsB,KAAtB,CAPuB;AAQjCM,WAAOb,EAAEc,aAAF,CAAgB;AACnBX,kBAAU;AADS,KAAhB;AAR0B,CAAX,CAAnB;AAYP;AACO,IAAMY,gFAAoC,SAApCA,iCAAoC,CAACC,IAAD,EAAOC,UAAP,EAAsB;AACnE,QAAI,CAACA,UAAL,EACI,OAAOD,IAAP;AACJ,QAAME,WAAWlB,EAAEkB,QAAF,CAAWF,IAAX,CAAjB;AACA,QAAIC,WAAWE,MAAX,CAAkB;AAAA,eAAaC,UAAUT,QAAV,KAAuBK,KAAKL,QAAzC;AAAA,KAAlB,EAAqEU,MAArE,GAA8E,CAAlF,EACI,OAAOH,SAAS,UAAT,EAAqB,oBAAUI,0BAA/B,CAAP;AACJ,QAAIL,WAAWE,MAAX,CAAkB;AAAA,eAAaC,UAAUP,KAAV,KAAoBG,KAAKH,KAAtC;AAAA,KAAlB,EAA+DQ,MAA/D,GAAwE,CAA5E,EACI,OAAOH,SAAS,OAAT,EAAkB,oBAAUK,uBAA5B,CAAP;AACJ,WAAOP,IAAP;AACH,CATM;AAUP","file":"createUser.js","sourcesContent":["import * as V from 'ptz-validations';\nimport allErrors from './allErrors';\nexport const userNameValidation = V.validateString({\n    required: true,\n    minLength: 3,\n    maxLength: 30,\n    toLowerCase: true\n});\nexport const getPasswordValidation = (required) => V.validateString({\n    required,\n    minLength: 6,\n    maxLength: 30\n});\n/**\n * Create user\n */\nexport const createUser = V.validate({\n    displayName: V.validateString({\n        required: true,\n        minLength: 2,\n        maxLength: 50\n    }),\n    userName: userNameValidation,\n    password: getPasswordValidation(false),\n    email: V.validateEmail({\n        required: true\n    })\n});\n// TODO: rewrite\nexport const otherUsersWithSameUserNameOrEmail = (user, otherUsers) => {\n    if (!otherUsers)\n        return user;\n    const addError = V.addError(user);\n    if (otherUsers.filter(otherUser => otherUser.userName === user.userName).length > 0)\n        return addError('userName', allErrors.ERROR_USER_USERNAME_IN_USE);\n    if (otherUsers.filter(otherUser => otherUser.email === user.email).length > 0)\n        return addError('email', allErrors.ERROR_USER_EMAIL_IN_USE);\n    return user;\n};\n//# sourceMappingURL=createUser.js.map"]}